---
import { parse } from "node-html-parser";

import Layout from "~layouts/Main.astro";
import Content from "~components/Content.astro";
import Page from "~components/Page.astro";
import Row from "~components/Page/Row.astro";
import Back from "~components/Anchor/Back.astro";

import { articles } from "~data/layout.json";
import { get, create } from "~scripts/helpers";

export function getStaticPaths() {
  return get.StaticPaths(articles);
}

interface Local {
  desc: String;
  summary: String;
  pathname: String;
}

interface Props {
  name: String;
  local: Local;
}

const { name, local }: Props = Astro.props;

const sections = create.sections(local.desc, "<h3");

const layoutProps = {
  title: "Paul Heading | Article | " + name,
  description: local.summary,
};
---

<Layout {...layoutProps}>
  <Content>
    <Page>
      {
        sections.map((section: string) => (
          <Row content={{ padding: true }}>{parse(section)}</Row>
        ))
      }
    </Page>
    <div class="wrap-back">
      <Back href="/articles">Articles</Back>
    </div>
  </Content>
</Layout>

<style lang="scss">
  @import "~styles/mixins";

  .wrap-back {
    margin-top: $padding-row * 2;
  }
</style>
