---
import MenuLink from "~components/Menu/Link.astro";
import HomeLink from "~components/Menu/Link/Home.astro";

import AboutIcon from "~components/Menu/Icon/About.astro";
import ResumeIcon from "~components/Menu/Icon/Resume.astro";

const mode = Astro.url.pathname == "/" ? "home" : "away";

const containerProps = {
  id: "menu",
  "class:list": ["container", mode],
};
---

<script src="~scripts/components/menu.js"></script>

<div {...containerProps}>
  <div class="wrap">
    <div class="logo">
      <HomeLink />
    </div>
    <div class="links">
      <MenuLink name="about">
        <div class="desktop">About</div>
        <div class="mobile">
          <AboutIcon />
        </div>
      </MenuLink>
      <MenuLink name="resume">
        <div class="desktop">Resume</div>
        <div class="mobile">
          <ResumeIcon />
        </div>
      </MenuLink>
    </div>
  </div>
</div>

<style lang="scss">
  @import "~styles/mixins";

  @mixin adjust-position {
    position: relative;
    left: -0.375rem;
  }

  .container {
    @include container;
  }

  .container.home {
    @include small-up {
      position: absolute;
      width: 100%;
      left: 0;
      top: 0;
    }
  }

  @each $key, $value in $heroes {
    .container.home[data-loop="#{$key}"] {
      @include small-down {
        background-color: map-get($value, banner);
      }
    }
  }

  .container.away {
    @include small-down {
      background-color: $c-body-banner;
    }
  }

  .wrap {
    @include wrap;
    @include flex-links;
    justify-content: center;

    @include medium-down {
      @include adjust-position;
    }

    @include small-up {
      justify-content: space-between;
    }
  }

  .links {
    @include flex-links;
  }

  .link {
    display: block;

    @include small-up {
      font-size: 1.5rem;
      line-height: 1.2;
    }
  }

  .link.disabled {
    text-decoration: none;
    pointer-events: none;

    @include small-down {
      @include focus-link;
    }
  }

  .about-link {
    @include small-down {
      border-radius: 50%;
    }

    @include small-up {
      border-radius: $border-radius-sm;
      padding: $padding-link;
    }
  }

  .about-link:not(.disabled) {
    @include small-down {
      @include focus {
        @include focus-link;
      }
    }

    @include small-up {
      background-color: black;
      text-decoration: none;
      color: white;

      @include focus {
        @include focus-about(black, white);
      }
    }
  }

  .about-link.disabled {
    @include small-up {
      @include focus-about(black, white);
    }
  }

  .resume-link {
    @include small-down {
      border-radius: $border-radius-sm;
    }

    @include small-up {
      border: 0.125rem dotted transparent;
      padding: 0.375rem;
    }
  }

  .resume-link:not(.disabled) {
    @include small-down {
      @include focus {
        @include focus-link;
      }
    }

    @include small-up {
      @include focus {
        @include focus-resume;
      }
    }
  }

  .resume-link.disabled {
    @include small-up {
      @include focus-resume;
    }
  }

  .desktop {
    display: flex;

    @include small-down {
      display: none;
    }
  }

  .mobile {
    display: flex;

    @include small-up {
      display: none;
    }
  }
</style>
